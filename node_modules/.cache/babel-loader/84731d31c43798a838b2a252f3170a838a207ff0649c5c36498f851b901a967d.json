{"ast":null,"code":"import _toConsumableArray from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import MetaInfo from\"./MetaInfo\";import BottomNav from\"./BottomNav\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchResults=function SearchResults(_ref){var results=_ref.results,setResults=_ref.setResults,next=_ref.next,setNext=_ref.setNext;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),addedTracks=_useState2[0],setAddedTracks=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showResults=_useState4[0],setShowResults=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showMetaInfo=_useState6[0],setShowMetaInfo=_useState6[1];var _useState7=useState(window.innerWidth),_useState8=_slicedToArray(_useState7,2),windowWidth=_useState8[0],setWindowWidth=_useState8[1];var portrait=window.matchMedia(\"(orientation: portrait)\");useEffect(function(){portrait.addEventListener(\"change\",function(e){setWindowWidth(window.innerWidth);});},[windowWidth,portrait]);var audio=new Audio();var deleteTrack=function deleteTrack(id){setAddedTracks(addedTracks.filter(function(track){return track.id!==id;}));};var goToSearch=function goToSearch(){setShowResults(true);setShowMetaInfo(false);};var goToData=function goToData(){setShowResults(false);setShowMetaInfo(true);};// const getNext = async () => {\n//   if (next) {\n//     await fetch(\"/search\", {\n//       method: \"POST\",\n//       headers: {\n//         \"Content-type\": \"application/json\",\n//         \"Access-Control-Allow-Origin\": \"*\",\n//         \"Access-Control-Allow-Credentials\": \"true\",\n//         \"Access-Control-Allow-Methods\": \"POST\",\n//         \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n//       },\n//       body: JSON.stringify({ track: next }),\n//     })\n//       .then((res) => res.json())\n//       .then((data) => {\n//         setResults(data);\n//         setNext(data[0].next);\n//         console.log(next);\n//       });\n//   }\n// };\nvar titles=results.map(function(track){var artists=[];track.artists.forEach(function(artist){return artists.push(artist.name);});var artistNames=artists.join(\", \");return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container-tracks\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-play\",onClick:function onClick(){if(audio.src!==track.preview){audio.src=track.preview;}audio.paused?audio.play():audio.pause();},children:\">||\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add-track\",onClick:function onClick(){if(!addedTracks.includes(track)){setAddedTracks([].concat(_toConsumableArray(addedTracks),[track]));}},children:\"+\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:artistNames}),/*#__PURE__*/_jsx(\"td\",{children:track.title})]},track.id)},track.id);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-container-tracks\",children:/*#__PURE__*/_jsx(\"section\",{className:\"results-section\",children:showResults&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"track-results-header\",children:\"Preview and Add Tracks\"}),/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsx(\"tbody\",{children:titles})})]})})}),showMetaInfo&&/*#__PURE__*/_jsx(MetaInfo,{addedTracks:addedTracks,deleteTrack:deleteTrack}),/*#__PURE__*/_jsx(BottomNav,{search:goToSearch,data:goToData})]});};export default SearchResults;","map":{"version":3,"names":["React","useState","useEffect","MetaInfo","BottomNav","SearchResults","results","setResults","next","setNext","addedTracks","setAddedTracks","showResults","setShowResults","showMetaInfo","setShowMetaInfo","window","innerWidth","windowWidth","setWindowWidth","portrait","matchMedia","addEventListener","e","audio","Audio","deleteTrack","id","filter","track","goToSearch","goToData","titles","map","artists","forEach","artist","push","name","artistNames","join","src","preview","paused","play","pause","includes","title"],"sources":["/Users/shaun/Documents/dev/JavaScript/apps/spotify/src/components/SearchResults.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport MetaInfo from \"./MetaInfo\";\nimport BottomNav from \"./BottomNav\";\n\nconst SearchResults = ({ results, setResults, next, setNext }) => {\n  const [addedTracks, setAddedTracks] = useState([]);\n  const [showResults, setShowResults] = useState(true);\n  const [showMetaInfo, setShowMetaInfo] = useState(false);\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n\n  let portrait = window.matchMedia(\"(orientation: portrait)\");\n\n  useEffect(() => {\n    portrait.addEventListener(\"change\", (e) => {\n      setWindowWidth(window.innerWidth);\n    });\n  }, [windowWidth, portrait]);\n\n  let audio = new Audio();\n\n  const deleteTrack = (id) => {\n    setAddedTracks(addedTracks.filter((track) => track.id !== id));\n  };\n\n  const goToSearch = () => {\n    setShowResults(true);\n    setShowMetaInfo(false);\n  };\n\n  const goToData = () => {\n    setShowResults(false);\n    setShowMetaInfo(true);\n  };\n\n  // const getNext = async () => {\n  //   if (next) {\n  //     await fetch(\"/search\", {\n  //       method: \"POST\",\n  //       headers: {\n  //         \"Content-type\": \"application/json\",\n  //         \"Access-Control-Allow-Origin\": \"*\",\n  //         \"Access-Control-Allow-Credentials\": \"true\",\n  //         \"Access-Control-Allow-Methods\": \"POST\",\n  //         \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n  //       },\n  //       body: JSON.stringify({ track: next }),\n  //     })\n  //       .then((res) => res.json())\n  //       .then((data) => {\n  //         setResults(data);\n  //         setNext(data[0].next);\n  //         console.log(next);\n  //       });\n  //   }\n  // };\n\n  const titles = results.map((track) => {\n    let artists = [];\n    track.artists.forEach((artist) => artists.push(artist.name));\n    const artistNames = artists.join(\", \");\n\n    return (\n      <React.Fragment key={track.id}>\n        <tr key={track.id}>\n          <td>\n            <div className='flex-container-tracks'>\n              <button\n                className='btn-play'\n                onClick={() => {\n                  if (audio.src !== track.preview) {\n                    audio.src = track.preview;\n                  }\n                  audio.paused ? audio.play() : audio.pause();\n                }}\n              >\n                {\">||\"}\n              </button>\n              <button\n                className='btn-add-track'\n                onClick={() => {\n                  if (!addedTracks.includes(track)) {\n                    setAddedTracks([...addedTracks, track]);\n                  }\n                }}\n              >\n                +\n              </button>\n            </div>\n          </td>\n          <td>{artistNames}</td>\n          <td>{track.title}</td>\n        </tr>\n      </React.Fragment>\n    );\n  });\n\n  return (\n    <>\n      <div className='flex-container-tracks'>\n        <section className='results-section'>\n          {showResults && (\n            <>\n              <h2 className='track-results-header'>Preview and Add Tracks</h2>\n              {/* <button className='btn-next' onClick={getNext}>\n                Next 20\n              </button> */}\n              <table>\n                <tbody>{titles}</tbody>\n              </table>\n            </>\n          )}\n        </section>\n      </div>\n      {showMetaInfo && (\n        <MetaInfo addedTracks={addedTracks} deleteTrack={deleteTrack} />\n      )}\n      <BottomNav search={goToSearch} data={goToData} />\n    </>\n  );\n};\n\nexport default SearchResults;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}