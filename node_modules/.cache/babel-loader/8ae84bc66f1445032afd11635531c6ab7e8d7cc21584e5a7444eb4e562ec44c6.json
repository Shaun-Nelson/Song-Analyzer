{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import SearchResults from\"./SearchResults\";//TODO get next 20 results w/ btn\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Searchbar=function Searchbar(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),results=_useState4[0],setResults=_useState4[1];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"search\",onSubmit:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var payload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(document.getElementById(\"btn-track\").checked){payload=JSON.stringify({track:search});}else if(document.getElementById(\"btn-artist\").checked){payload=JSON.stringify({track:\"artist:\"+search});}else if(document.getElementById(\"btn-genre\").checked){payload=JSON.stringify({track:\"genre:\"+search});}if(!search){_context.next=5;break;}_context.next=5;return fetch(\"/search\",{method:\"POST\",headers:{\"Content-type\":\"application/json\",\"Access-Control-Allow-Origin\":\"*\",\"Access-Control-Allow-Credentials\":\"true\",\"Access-Control-Allow-Methods\":\"POST\",\"Access-Control-Allow-Headers\":\"Content-Type, Authorization\"},body:payload}).then(function(res){return res.json();}).then(function(data){setResults(data);setSearch(\"\");});case 5:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),children:[/*#__PURE__*/_jsx(\"input\",{className:\"btn-search-radio\",type:\"radio\",name:\"search\",id:\"btn-track\",defaultChecked:true,value:\"By Track Title\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"btn-track\",className:\"search-label\",children:\"By Track Title\"}),/*#__PURE__*/_jsx(\"input\",{className:\"btn-search-radio\",type:\"radio\",name:\"search\",id:\"btn-artist\",value:\"By Artist\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"btn-artist\",className:\"search-label\",children:\"By Artist\"}),/*#__PURE__*/_jsx(\"input\",{className:\"btn-search-radio\",type:\"radio\",name:\"search\",id:\"btn-genre\",value:\"By Genre\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"btn-genre\",className:\"search-label\",children:\"By Genre\"}),/*#__PURE__*/_jsx(\"input\",{className:\"searchbar\",id:\"searchbar\",type:\"text\",value:search,onChange:function onChange(e){return setSearch(e.target.value);},placeholder:\"Search by Track, Artist, or Genre.\"}),/*#__PURE__*/_jsx(\"input\",{className:\"btn-submit\",value:\"Search\",type:\"submit\"})]})}),results&&/*#__PURE__*/_jsx(SearchResults,{results:results})]});};export default Searchbar;","map":{"version":3,"names":["React","useState","SearchResults","Searchbar","search","setSearch","results","setResults","e","preventDefault","document","getElementById","checked","payload","JSON","stringify","track","fetch","method","headers","body","then","res","json","data","target","value"],"sources":["/Users/shaun/Documents/dev/JavaScript/apps/spotify/src/components/Searchbar.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport SearchResults from \"./SearchResults\";\n\n//TODO get next 20 results w/ btn\n\nconst Searchbar = () => {\n  const [search, setSearch] = useState(\"\");\n  const [results, setResults] = useState(null);\n\n  return (\n    <>\n      <div className='flex-container'>\n        <form\n          className='search'\n          onSubmit={async (e) => {\n            e.preventDefault();\n\n            let payload;\n\n            if (document.getElementById(\"btn-track\").checked) {\n              payload = JSON.stringify({ track: search });\n            } else if (document.getElementById(\"btn-artist\").checked) {\n              payload = JSON.stringify({ track: \"artist:\" + search });\n            } else if (document.getElementById(\"btn-genre\").checked) {\n              payload = JSON.stringify({ track: \"genre:\" + search });\n            }\n\n            if (search) {\n              await fetch(\"/search\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-type\": \"application/json\",\n                  \"Access-Control-Allow-Origin\": \"*\",\n                  \"Access-Control-Allow-Credentials\": \"true\",\n                  \"Access-Control-Allow-Methods\": \"POST\",\n                  \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n                },\n                body: payload,\n              })\n                .then((res) => res.json())\n                .then((data) => {\n                  setResults(data);\n                  setSearch(\"\");\n                });\n            }\n          }}\n        >\n          <input\n            className='btn-search-radio'\n            type='radio'\n            name='search'\n            id='btn-track'\n            defaultChecked\n            value='By Track Title'\n          ></input>\n          <label htmlFor='btn-track' className='search-label'>\n            By Track Title\n          </label>\n          <input\n            className='btn-search-radio'\n            type='radio'\n            name='search'\n            id='btn-artist'\n            value='By Artist'\n          ></input>\n          <label htmlFor='btn-artist' className='search-label'>\n            By Artist\n          </label>\n          <input\n            className='btn-search-radio'\n            type='radio'\n            name='search'\n            id='btn-genre'\n            value='By Genre'\n          ></input>\n          <label htmlFor='btn-genre' className='search-label'>\n            By Genre\n          </label>\n          <input\n            className='searchbar'\n            id='searchbar'\n            type='text'\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder='Search by Track, Artist, or Genre.'\n          ></input>\n          <input className='btn-submit' value='Search' type='submit'></input>\n        </form>\n      </div>\n      {results && <SearchResults results={results} />}\n    </>\n  );\n};\n\nexport default Searchbar;\n"],"mappings":"waAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAOC,cAAa,KAAM,iBAAiB,CAE3C;AAAA,6IAEA,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CACtB,cAA4BF,QAAQ,CAAC,EAAE,CAAC,wCAAjCG,MAAM,eAAEC,SAAS,eACxB,eAA8BJ,QAAQ,CAAC,IAAI,CAAC,yCAArCK,OAAO,eAAEC,UAAU,eAE1B,mBACE,wCACE,YAAK,SAAS,CAAC,gBAAgB,uBAC7B,cACE,SAAS,CAAC,QAAQ,CAClB,QAAQ,4FAAE,iBAAOC,CAAC,+HAChBA,CAAC,CAACC,cAAc,EAAE,CAIlB,GAAIC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC,CAACC,OAAO,CAAE,CAChDC,OAAO,CAAGC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAEZ,MAAO,CAAC,CAAC,CAC7C,CAAC,IAAM,IAAIM,QAAQ,CAACC,cAAc,CAAC,YAAY,CAAC,CAACC,OAAO,CAAE,CACxDC,OAAO,CAAGC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAE,SAAS,CAAGZ,MAAO,CAAC,CAAC,CACzD,CAAC,IAAM,IAAIM,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC,CAACC,OAAO,CAAE,CACvDC,OAAO,CAAGC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAE,QAAQ,CAAGZ,MAAO,CAAC,CAAC,CACxD,CAAC,IAEGA,MAAM,+CACFa,MAAK,CAAC,SAAS,CAAE,CACrBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,6BAA6B,CAAE,GAAG,CAClC,kCAAkC,CAAE,MAAM,CAC1C,8BAA8B,CAAE,MAAM,CACtC,8BAA8B,CAAE,6BAClC,CAAC,CACDC,IAAI,CAAEP,OACR,CAAC,CAAC,CACCQ,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,IAAI,EAAE,GAAC,CACzBF,IAAI,CAAC,SAACG,IAAI,CAAK,CACdjB,UAAU,CAACiB,IAAI,CAAC,CAChBnB,SAAS,CAAC,EAAE,CAAC,CACf,CAAC,CAAC,sDAEP,8DAAC,wBAEF,cACE,SAAS,CAAC,kBAAkB,CAC5B,IAAI,CAAC,OAAO,CACZ,IAAI,CAAC,QAAQ,CACb,EAAE,CAAC,WAAW,CACd,cAAc,MACd,KAAK,CAAC,gBAAgB,EACf,cACT,cAAO,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,cAAc,UAAC,gBAEpD,EAAQ,cACR,cACE,SAAS,CAAC,kBAAkB,CAC5B,IAAI,CAAC,OAAO,CACZ,IAAI,CAAC,QAAQ,CACb,EAAE,CAAC,YAAY,CACf,KAAK,CAAC,WAAW,EACV,cACT,cAAO,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,cAAc,UAAC,WAErD,EAAQ,cACR,cACE,SAAS,CAAC,kBAAkB,CAC5B,IAAI,CAAC,OAAO,CACZ,IAAI,CAAC,QAAQ,CACb,EAAE,CAAC,WAAW,CACd,KAAK,CAAC,UAAU,EACT,cACT,cAAO,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,cAAc,UAAC,UAEpD,EAAQ,cACR,cACE,SAAS,CAAC,WAAW,CACrB,EAAE,CAAC,WAAW,CACd,IAAI,CAAC,MAAM,CACX,KAAK,CAAED,MAAO,CACd,QAAQ,CAAE,kBAACI,CAAC,QAAKH,UAAS,CAACG,CAAC,CAACiB,MAAM,CAACC,KAAK,CAAC,EAAC,CAC3C,WAAW,CAAC,oCAAoC,EACzC,cACT,cAAO,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAS,GAC9D,EACH,CACLpB,OAAO,eAAI,KAAC,aAAa,EAAC,OAAO,CAAEA,OAAQ,EAAG,GAC9C,CAEP,CAAC,CAED,cAAeH,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}