{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Track=function Track(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),apiData=_useState2[0],setApiData=_useState2[1];useEffect(function(){getData();},[]);var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/analysis\",{method:\"POST\",headers:{\"Content-type\":\"application/json\",\"Access-Control-Allow-Origin\":\"*\",\"Access-Control-Allow-Credentials\":\"true\",\"Access-Control-Allow-Methods\":\"POST\",\"Access-Control-Allow-Headers\":\"Content-Type, Authorization\"},body:JSON.stringify({track:props.id})}).then(function(res){return res.json();}).then(function(data){setApiData(data);});case 2:case\"end\":return _context.stop();}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var keyConverter={0:\"C\",1:\"C#\",2:\"D\",3:\"E♭\",4:\"E\",5:\"F\",6:\"F#\",7:\"G\",8:\"G#\",9:\"A\",10:\"B♭\",11:\"B\"};var artists=[];props.artists.forEach(function(artist){return artists.push(artist.name);});var artistList=artists.join(\", \");return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete-track\",onClick:function onClick(){return props.deleteTrack(props.id);},children:\"-\"})}),/*#__PURE__*/_jsx(\"td\",{children:artistList}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(props.title.length>30?props.title.slice(0,29)+\"...\":props.title)}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(Math.floor(Math.round(apiData.duration_ms/1000/60)),\":\").concat(Math.round(apiData.duration_ms/1000))}),/*#__PURE__*/_jsx(\"td\",{children:apiData.bpm}),/*#__PURE__*/_jsx(\"td\",{children:keyConverter[apiData.key]}),/*#__PURE__*/_jsx(\"td\",{children:Math.round(apiData.energy*100)+\"%\"}),/*#__PURE__*/_jsx(\"td\",{children:Math.round(apiData.danceability*100)+\"%\"})]},props.id);};export default Track;","map":{"version":3,"names":["React","useState","useEffect","Track","props","apiData","setApiData","getData","fetch","method","headers","body","JSON","stringify","track","id","then","res","json","data","keyConverter","artists","forEach","artist","push","name","artistList","join","deleteTrack","title","length","slice","Math","floor","round","duration_ms","bpm","key","energy","danceability"],"sources":["/Users/shaun/Documents/dev/JavaScript/apps/spotify/src/components/Track.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nconst Track = (props) => {\n  const [apiData, setApiData] = useState(\"\");\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  const getData = async () => {\n    await fetch(\"/analysis\", {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Credentials\": \"true\",\n        \"Access-Control-Allow-Methods\": \"POST\",\n        \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n      },\n      body: JSON.stringify({ track: props.id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setApiData(data);\n      });\n  };\n\n  const keyConverter = {\n    0: \"C\",\n    1: \"C#\",\n    2: \"D\",\n    3: \"E♭\",\n    4: \"E\",\n    5: \"F\",\n    6: \"F#\",\n    7: \"G\",\n    8: \"G#\",\n    9: \"A\",\n    10: \"B♭\",\n    11: \"B\",\n  };\n\n  let artists = [];\n  props.artists.forEach((artist) => artists.push(artist.name));\n  const artistList = artists.join(\", \");\n\n  return (\n    <tr key={props.id}>\n      <td>\n        <button\n          className='btn-delete-track'\n          onClick={() => props.deleteTrack(props.id)}\n        >\n          -\n        </button>\n      </td>\n      <td>{artistList}</td>\n      <td>{`${\n        props.title.length > 30 ? props.title.slice(0, 29) + \"...\" : props.title\n      }`}</td>\n      <td>{`${Math.floor(\n        Math.round(apiData.duration_ms / 1000 / 60)\n      )}:${Math.round(apiData.duration_ms / 1000)}`}</td>\n      <td>{apiData.bpm}</td>\n      <td>{keyConverter[apiData.key]}</td>\n      <td>{Math.round(apiData.energy * 100) + \"%\"}</td>\n      <td>{Math.round(apiData.danceability * 100) + \"%\"}</td>\n    </tr>\n  );\n};\nexport default Track;\n"],"mappings":"waAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,wFAEnD,GAAMC,MAAK,CAAG,QAARA,MAAK,CAAIC,KAAK,CAAK,CACvB,cAA8BH,QAAQ,CAAC,EAAE,CAAC,wCAAnCI,OAAO,eAAEC,UAAU,eAE1BJ,SAAS,CAAC,UAAM,CACdK,OAAO,EAAE,CACX,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMA,QAAO,4FAAG,0JACRC,MAAK,CAAC,WAAW,CAAE,CACvBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,6BAA6B,CAAE,GAAG,CAClC,kCAAkC,CAAE,MAAM,CAC1C,8BAA8B,CAAE,MAAM,CACtC,8BAA8B,CAAE,6BAClC,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAEV,KAAK,CAACW,EAAG,CAAC,CAC1C,CAAC,CAAC,CACCC,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,IAAI,EAAE,GAAC,CACzBF,IAAI,CAAC,SAACG,IAAI,CAAK,CACdb,UAAU,CAACa,IAAI,CAAC,CAClB,CAAC,CAAC,sDACL,kBAhBKZ,QAAO,0CAgBZ,CAED,GAAMa,aAAY,CAAG,CACnB,CAAC,CAAE,GAAG,CACN,CAAC,CAAE,IAAI,CACP,CAAC,CAAE,GAAG,CACN,CAAC,CAAE,IAAI,CACP,CAAC,CAAE,GAAG,CACN,CAAC,CAAE,GAAG,CACN,CAAC,CAAE,IAAI,CACP,CAAC,CAAE,GAAG,CACN,CAAC,CAAE,IAAI,CACP,CAAC,CAAE,GAAG,CACN,EAAE,CAAE,IAAI,CACR,EAAE,CAAE,GACN,CAAC,CAED,GAAIC,QAAO,CAAG,EAAE,CAChBjB,KAAK,CAACiB,OAAO,CAACC,OAAO,CAAC,SAACC,MAAM,QAAKF,QAAO,CAACG,IAAI,CAACD,MAAM,CAACE,IAAI,CAAC,GAAC,CAC5D,GAAMC,WAAU,CAAGL,OAAO,CAACM,IAAI,CAAC,IAAI,CAAC,CAErC,mBACE,mCACE,iCACE,eACE,SAAS,CAAC,kBAAkB,CAC5B,OAAO,CAAE,yBAAMvB,MAAK,CAACwB,WAAW,CAACxB,KAAK,CAACW,EAAE,CAAC,EAAC,UAC5C,GAED,EAAS,EACN,cACL,oBAAKW,UAAU,EAAM,cACrB,8BACEtB,KAAK,CAACyB,KAAK,CAACC,MAAM,CAAG,EAAE,CAAG1B,KAAK,CAACyB,KAAK,CAACE,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAG,KAAK,CAAG3B,KAAK,CAACyB,KAAK,GAClE,cACR,8BAAQG,IAAI,CAACC,KAAK,CAChBD,IAAI,CAACE,KAAK,CAAC7B,OAAO,CAAC8B,WAAW,CAAG,IAAI,CAAG,EAAE,CAAC,CAC5C,aAAIH,IAAI,CAACE,KAAK,CAAC7B,OAAO,CAAC8B,WAAW,CAAG,IAAI,CAAC,GAAQ,cACnD,oBAAK9B,OAAO,CAAC+B,GAAG,EAAM,cACtB,oBAAKhB,YAAY,CAACf,OAAO,CAACgC,GAAG,CAAC,EAAM,cACpC,oBAAKL,IAAI,CAACE,KAAK,CAAC7B,OAAO,CAACiC,MAAM,CAAG,GAAG,CAAC,CAAG,GAAG,EAAM,cACjD,oBAAKN,IAAI,CAACE,KAAK,CAAC7B,OAAO,CAACkC,YAAY,CAAG,GAAG,CAAC,CAAG,GAAG,EAAM,GAnBhDnC,KAAK,CAACW,EAAE,CAoBZ,CAET,CAAC,CACD,cAAeZ,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}