{"ast":null,"code":"import _toConsumableArray from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import MetaInfo from\"./MetaInfo\";import BottomNav from\"./BottomNav\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchResults=function SearchResults(_ref){var results=_ref.results,setResults=_ref.setResults;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),addedTracks=_useState2[0],setAddedTracks=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showResults=_useState4[0],setShowResults=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showMetaInfo=_useState6[0],setShowMetaInfo=_useState6[1];var _useState7=useState(results[0].next),_useState8=_slicedToArray(_useState7,2),nextResults=_useState8[0],setNextResults=_useState8[1];var audio=new Audio();var portrait=window.matchMedia(\"(orientation: portrait)\");var deleteTrack=function deleteTrack(id){setAddedTracks(addedTracks.filter(function(track){return track.id!==id;}));};var goToSearch=function goToSearch(){setShowResults(true);setShowMetaInfo(false);};var goToData=function goToData(){setShowResults(false);setShowMetaInfo(true);};var getNext=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!nextResults){_context.next=3;break;}_context.next=3;return fetch(\"/search\",{method:\"POST\",headers:{\"Content-type\":\"application/json\",\"Access-Control-Allow-Origin\":\"*\",\"Access-Control-Allow-Credentials\":\"true\",\"Access-Control-Allow-Methods\":\"POST\",\"Access-Control-Allow-Headers\":\"Content-Type, Authorization\"},body:JSON.stringify({track:nextResults})}).then(function(res){return res.json();}).then(function(data){setResults(data);setNextResults(data[0].next);});case 3:case\"end\":return _context.stop();}},_callee);}));return function getNext(){return _ref2.apply(this,arguments);};}();var titles=results.map(function(track){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container-tracks-sb\",children:[window.innerHeight>window.innerWidth?/*#__PURE__*/_jsxs(\"span\",{className:\"artist-and-title\",children:[track.artists.length>1?\"\".concat(track.artists[0].name,\"  ft... - \"):\"\".concat(track.artists[0].name,\"  - \"),track.title.length>20?track.title.slice(0,19)+\"...\":track.title]}):/*#__PURE__*/_jsxs(\"span\",{className:\"artist-and-title\",children:[track.artists.length>1?\"\".concat(track.artists[0].name,\"  ft... - \"):\"\".concat(track.artists[0].name,\"  - \"),track.title]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-play\",onClick:function onClick(){if(audio.src!==track.preview){audio.src=track.preview;}audio.paused?audio.play():audio.pause();},children:\">||\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add-track\",onClick:function onClick(){if(!addedTracks.includes(track)){setAddedTracks([].concat(_toConsumableArray(addedTracks),[track]));}},children:\"+\"})]})]})},track.id)},track.id);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-container-tracks\",children:/*#__PURE__*/_jsx(\"section\",{className:\"results-section\",children:showResults&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"track-results-header\",children:\"Preview and Add Tracks\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-next\",onClick:getNext,children:\"Next 20\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"track-results-list\",children:titles})]})})}),showMetaInfo&&/*#__PURE__*/_jsx(MetaInfo,{addedTracks:addedTracks,deleteTrack:deleteTrack}),/*#__PURE__*/_jsx(BottomNav,{search:goToSearch,data:goToData})]});};export default SearchResults;","map":{"version":3,"names":["React","useEffect","useState","MetaInfo","BottomNav","SearchResults","results","setResults","addedTracks","setAddedTracks","showResults","setShowResults","showMetaInfo","setShowMetaInfo","next","nextResults","setNextResults","audio","Audio","portrait","window","matchMedia","deleteTrack","id","filter","track","goToSearch","goToData","getNext","fetch","method","headers","body","JSON","stringify","then","res","json","data","titles","map","innerHeight","innerWidth","artists","length","name","title","slice","src","preview","paused","play","pause","includes"],"sources":["/Users/shaun/Documents/dev/JavaScript/apps/spotify/src/components/SearchResults.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport MetaInfo from \"./MetaInfo\";\nimport BottomNav from \"./BottomNav\";\n\nconst SearchResults = ({ results, setResults }) => {\n  const [addedTracks, setAddedTracks] = useState([]);\n  const [showResults, setShowResults] = useState(true);\n  const [showMetaInfo, setShowMetaInfo] = useState(false);\n  const [nextResults, setNextResults] = useState(results[0].next);\n\n  let audio = new Audio();\n\n  let portrait = window.matchMedia(\"(orientation: portrait)\");\n\n  const deleteTrack = (id) => {\n    setAddedTracks(addedTracks.filter((track) => track.id !== id));\n  };\n\n  const goToSearch = () => {\n    setShowResults(true);\n    setShowMetaInfo(false);\n  };\n\n  const goToData = () => {\n    setShowResults(false);\n    setShowMetaInfo(true);\n  };\n\n  const getNext = async () => {\n    if (nextResults) {\n      await fetch(\"/search\", {\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Credentials\": \"true\",\n          \"Access-Control-Allow-Methods\": \"POST\",\n          \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n        },\n        body: JSON.stringify({ track: nextResults }),\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          setResults(data);\n          setNextResults(data[0].next);\n        });\n    }\n  };\n\n  const titles = results.map((track) => {\n    return (\n      <React.Fragment key={track.id}>\n        <li key={track.id}>\n          <div className='flex-container-tracks-sb'>\n            {window.innerHeight > window.innerWidth ? (\n              <span className='artist-and-title'>\n                {track.artists.length > 1\n                  ? `${track.artists[0].name}  ft... - `\n                  : `${track.artists[0].name}  - `}\n                {track.title.length > 20\n                  ? track.title.slice(0, 19) + \"...\"\n                  : track.title}\n              </span>\n            ) : (\n              <span className='artist-and-title'>\n                {track.artists.length > 1\n                  ? `${track.artists[0].name}  ft... - `\n                  : `${track.artists[0].name}  - `}\n                {track.title}\n              </span>\n            )}\n            <div>\n              <button\n                className='btn-play'\n                onClick={() => {\n                  if (audio.src !== track.preview) {\n                    audio.src = track.preview;\n                  }\n                  audio.paused ? audio.play() : audio.pause();\n                }}\n              >\n                {\">||\"}\n              </button>\n\n              <button\n                className='btn-add-track'\n                onClick={() => {\n                  if (!addedTracks.includes(track)) {\n                    setAddedTracks([...addedTracks, track]);\n                  }\n                }}\n              >\n                +\n              </button>\n            </div>\n          </div>\n        </li>\n      </React.Fragment>\n    );\n  });\n\n  return (\n    <>\n      <div className='flex-container-tracks'>\n        <section className='results-section'>\n          {showResults && (\n            <>\n              <h2 className='track-results-header'>Preview and Add Tracks</h2>\n              <button className='btn-next' onClick={getNext}>\n                Next 20\n              </button>\n              <ul className='track-results-list'>{titles}</ul>\n            </>\n          )}\n        </section>\n      </div>\n      {showMetaInfo && (\n        <MetaInfo addedTracks={addedTracks} deleteTrack={deleteTrack} />\n      )}\n      <BottomNav search={goToSearch} data={goToData} />\n    </>\n  );\n};\n\nexport default SearchResults;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}