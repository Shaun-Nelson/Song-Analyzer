{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shaun/Documents/dev/JavaScript/apps/spotify/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";//TODO sort categories\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Track=function Track(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),apiData=_useState2[0],setApiData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showTrack=_useState4[0],setShowTrack=_useState4[1];useEffect(function(){getData();},[]);var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/analysis\",{method:\"POST\",headers:{\"Content-type\":\"application/json\",\"Access-Control-Allow-Origin\":\"*\",\"Access-Control-Allow-Credentials\":\"true\",\"Access-Control-Allow-Methods\":\"POST\",\"Access-Control-Allow-Headers\":\"Content-Type, Authorization\"},body:JSON.stringify({track:props.id})}).then(function(res){return res.json();}).then(function(data){setApiData(data);});case 2:case\"end\":return _context.stop();}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var keyConverter={0:\"C\",1:\"C#\",2:\"D\",3:\"E♭\",4:\"E\",5:\"F\",6:\"F#\",7:\"G\",8:\"G#\",9:\"A\",10:\"B♭\",11:\"B\"};var artists=[];props.artists.forEach(function(artist){return artists.push(artist.name);});var artistList=artists.join(\", \");return/*#__PURE__*/_jsx(_Fragment,{children:showTrack&&/*#__PURE__*/_jsx(\"div\",{className:\"flex-container-tracks\",children:/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete-track\",onClick:function onClick(){return setShowTrack(false);},children:\"-\"})}),/*#__PURE__*/_jsx(\"td\",{children:artistList}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(props.title.length>30?props.title.slice(0,29)+\"...\":props.title)}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(Math.floor(Math.round(apiData.duration_ms/1000/60)),\":\").concat(Math.round(apiData.duration_ms/1000))}),/*#__PURE__*/_jsx(\"td\",{children:apiData.bpm}),/*#__PURE__*/_jsx(\"td\",{children:keyConverter[apiData.key]}),/*#__PURE__*/_jsx(\"td\",{children:Math.round(apiData.energy*100)+\"%\"}),/*#__PURE__*/_jsx(\"td\",{children:Math.round(apiData.danceability*100)+\"%\"})]})})})})});};export default Track;","map":{"version":3,"names":["React","useState","useEffect","Track","props","apiData","setApiData","showTrack","setShowTrack","getData","fetch","method","headers","body","JSON","stringify","track","id","then","res","json","data","keyConverter","artists","forEach","artist","push","name","artistList","join","title","length","slice","Math","floor","round","duration_ms","bpm","key","energy","danceability"],"sources":["/Users/shaun/Documents/dev/JavaScript/apps/spotify/src/components/Track.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\n//TODO sort categories\n\nconst Track = (props) => {\n  const [apiData, setApiData] = useState(\"\");\n  const [showTrack, setShowTrack] = useState(true);\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  const getData = async () => {\n    await fetch(\"/analysis\", {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Credentials\": \"true\",\n        \"Access-Control-Allow-Methods\": \"POST\",\n        \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n      },\n      body: JSON.stringify({ track: props.id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setApiData(data);\n      });\n  };\n\n  const keyConverter = {\n    0: \"C\",\n    1: \"C#\",\n    2: \"D\",\n    3: \"E♭\",\n    4: \"E\",\n    5: \"F\",\n    6: \"F#\",\n    7: \"G\",\n    8: \"G#\",\n    9: \"A\",\n    10: \"B♭\",\n    11: \"B\",\n  };\n\n  let artists = [];\n  props.artists.forEach((artist) => artists.push(artist.name));\n  const artistList = artists.join(\", \");\n\n  return (\n    <>\n      {showTrack && (\n        <div className='flex-container-tracks'>\n          <table className='table'>\n            <tbody>\n              <tr>\n                <td>\n                  <button\n                    className='btn-delete-track'\n                    onClick={() => setShowTrack(false)}\n                  >\n                    -\n                  </button>\n                </td>\n                <td>{artistList}</td>\n                <td>{`${\n                  props.title.length > 30\n                    ? props.title.slice(0, 29) + \"...\"\n                    : props.title\n                }`}</td>\n                <td>{`${Math.floor(\n                  Math.round(apiData.duration_ms / 1000 / 60)\n                )}:${Math.round(apiData.duration_ms / 1000)}`}</td>\n                <td>{apiData.bpm}</td>\n                <td>{keyConverter[apiData.key]}</td>\n                <td>{Math.round(apiData.energy * 100) + \"%\"}</td>\n                <td>{Math.round(apiData.danceability * 100) + \"%\"}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      )}\n    </>\n  );\n};\nexport default Track;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}